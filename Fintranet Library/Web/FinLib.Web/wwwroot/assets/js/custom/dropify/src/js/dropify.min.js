function Dropify(n,t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){this.element=n;this.input=$(this.element);this.wrapper=null;this.preview=null;this.filenameWrapper=null;this.settings=$.extend(!0,{defaultFile:"",maxFileSize:0,messages:{"default":"Drag and drop a file here or click",replace:"Drag and drop or click to replace",remove:"Remove",error:"Sorry, this file is too large"},tpl:{wrap:'<div class="dropify-wrapper"><\/div>',message:'<div class="dropify-message"><span class="file-icon" /> <p>{{ default }}<\/p><\/div>',preview:'<div class="dropify-preview"><span class="dropify-render"><\/span><div class="dropify-infos"><div class="dropify-infos-inner"><p class="dropify-infos-message">{{ replace }}<\/p><\/div><\/div><\/div>',filename:'<p class="dropify-filename"><span class="file-icon"><\/span> <span class="dropify-filename-inner"><\/span><\/p>',clearButton:'<button type="button" class="dropify-clear">{{ remove }}<\/button>',error:'<p class="dropify-error">{{ error }}<\/p>'}},t,this.input.data());this.imgFileFormats=["png","jpg","jpeg","gif","bmp"];this.file=null;this.filename=null;this.isDisabled=!1;this.onChange=this.onChange.bind(this);this.clearElement=this.clearElement.bind(this);this.translate();this.createElements();this.setSize();this.input.on("change",this.onChange)}}var pluginName="dropify";Dropify.prototype.onChange=function(){this.resetPreview();this.setFilename(this.input.val());this.readUrl(this.element)};Dropify.prototype.createElements=function(){var t,n;if(this.input.wrap($(this.settings.tpl.wrap)),this.wrapper=this.input.parent(),t=$(this.settings.tpl.message).insertBefore(this.input),$(this.settings.tpl.error).appendTo(t),this.isTouchDevice()===!0&&this.wrapper.addClass("touch-fallback"),this.input.attr("disabled")&&(this.isDisabled=!0,this.wrapper.addClass("disabled")),this.preview=$(this.settings.tpl.preview),this.preview.insertAfter(this.input),this.isDisabled===!1&&this.settings.disableRemove!==!0){this.clearButton=$(this.settings.tpl.clearButton);this.clearButton.insertAfter(this.input);this.clearButton.on("click",this.clearElement)}this.filenameWrapper=$(this.settings.tpl.filename);this.filenameWrapper.prependTo(this.preview.find(".dropify-infos-inner"));n=this.settings.defaultFile||"";n.trim()!=""&&(this.setFilename(n),this.setPreview(n))};Dropify.prototype.readUrl=function(n){if(n.files&&n.files[0]){var t=new FileReader;this.file=n.files[0];this.checkFileSize()?(t.onload=function(n){this.setPreview(n.target.result,this.file.name)}.bind(this),t.readAsDataURL(this.file)):(this.wrapper.addClass("has-error"),this.resetPreview(),this.clearElement())}};Dropify.prototype.setPreview=function(n){this.wrapper.removeClass("has-error").addClass("has-preview");var t=this.preview.children(".dropify-render");this.isImage()===!0?$("<img />").attr("src",n).appendTo(t):($("<i />").attr("class","dropify-font-file").appendTo(t),$('<span class="dropify-extension" />').html(this.getFileType()).appendTo(t));this.preview.fadeIn()};Dropify.prototype.resetPreview=function(){this.wrapper.removeClass("has-preview");var n=this.preview.children(".dropify-render");n.find(".dropify-extension").remove();n.find("i").remove();n.find("img").remove();this.preview.hide()};Dropify.prototype.getFilename=function(n){var t=n.split("\\").pop();return t==n&&(t=n.split("/").pop()),n!=""?t:""};Dropify.prototype.setFilename=function(n){var n=this.getFilename(n);this.filename=n;this.filenameWrapper.children(".dropify-filename-inner").html(n)};Dropify.prototype.clearElement=function(){var n=$.Event("dropify.beforeClear"),t;this.input.trigger(n,[this]);n.result!==!1&&(this.file=null,this.input.val(""),this.resetPreview(),t=$.Event("dropify.afterClear"),this.input.trigger(t,[this]))};Dropify.prototype.setSize=function(){this.settings.height&&this.wrapper.height(this.settings.height)};Dropify.prototype.isTouchDevice=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0};Dropify.prototype.getFileType=function(){return this.filename.split(".").pop().toLowerCase()};Dropify.prototype.isImage=function(){return this.imgFileFormats.indexOf(this.getFileType())!="-1"?!0:!1};Dropify.prototype.translate=function(){var n,t;for(n in this.settings.tpl)for(t in this.settings.messages)this.settings.tpl[n]=this.settings.tpl[n].replace("{{ "+t+" }}",this.settings.messages[t])};Dropify.prototype.checkFileSize=function(){return this.maxFileSizeToByte()===0||this.file.size<=this.maxFileSizeToByte()?!0:!1};Dropify.prototype.maxFileSizeToByte=function(){var n=0;if(this.settings.maxFileSize!==0){var t=this.settings.maxFileSize.slice(-1).toUpperCase(),i=1024,r=i*1024,u=r*1024;t==="K"?n=parseFloat(this.settings.maxFileSize)*i:t==="M"?n=parseFloat(this.settings.maxFileSize)*r:t==="G"&&(n=parseFloat(this.settings.maxFileSize)*u)}return n};$.fn[pluginName]=function(n){return this.each(function(){$.data(this,"plugin_"+pluginName)||$.data(this,"plugin_"+pluginName,new Dropify(this,n))}),this};