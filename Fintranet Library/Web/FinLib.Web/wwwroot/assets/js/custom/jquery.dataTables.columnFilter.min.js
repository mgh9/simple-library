!function(e){e.fn.columnFilter=function(t){var n,a,r,l,i="From {from} to {to}",s=new Array,o=new Array,c=function(){};function u(e,t,n,a,r){if(void 0===t)return new Array;var l;void 0===n&&(n=!0),void 0===a&&(a=!0),void 0===r&&(r=!0),l=1==a?e.aiDisplay:e.aiDisplayMaster;for(var i=new Array,s=0,o=l.length;s<o;s++){var c=l[s],u=g.fnGetData(c)[t];1==r&&0==u.length||(1==n&&jQuery.inArray(u,i)>-1||i.push(u))}return i.sort()}function f(e){return v.bUseColVis?e:g.fnSettings().oApi._fnVisibleToColumnIndex(g.fnSettings(),e)}function d(t,i,s,o,u,d){var h="text_filter form-control";o&&(h="number_filter form-control"),r=r.replace(/(^\s*)|(\s*$)/g,"");var p=t.fnSettings().aoPreSearchCols[a].sSearch,g="search_init ",v=r;""!=p&&"^"!=p&&(v=o&&"^"==p.charAt(0)?p.substr(1):p,g="");var m=e('<input type="text" class="md-input '+g+h+'" value="'+v+'" rel="'+a+'" md-input />');void 0!=d&&-1!=d&&m.attr("maxlength",d),l.html(m),o?l.wrapInner('<span class="filter_column filter_number" />'):l.wrapInner('<span class="filter_column filter_text" />'),n[a]=r;var b=a;o&&!t.fnSettings().oFeatures.bServerSide?m.keyup(function(){t.fnFilter("^"+this.value,f(b),!0,!1),c()}):m.keyup(function(){if(t.fnSettings().oFeatures.bServerSide&&0!=u){t.fnSettings().aoPreSearchCols[b].sSearch;var n=e(this).data("dt-iLastFilterLength");void 0===n&&(n=0);var a=this.value.length;if(Math.abs(a-n)<u)return;e(this).data("dt-iLastFilterLength",a)}t.fnFilter(this.value,f(b),i,s),c()}),m.focus(function(){e(this).hasClass("search_init")&&(e(this).removeClass("search_init"),this.value="")}),m.blur(function(){""==this.value&&(e(this).addClass("search_init"),this.value=n[b])})}function h(t,n,r,l,i,s,o,f){null==n&&(n=u(t.fnSettings(),r,!0,!1,!0));var d=r,h=t.fnSettings().aoPreSearchCols[a].sSearch;null!=h&&""!=h||(h=o);var p='<select class="search_init select_filter form-control" rel="'+a+'"><option value="" class="search_init">'+i+"</option>";f&&(p='<select class="search_init select_filter form-control" rel="'+a+'" multiple>');var g=0,v=n.length;for(g=0;g<v;g++)if("object"!=typeof n[g]){var m="";escape(n[g])!=h&&escape(n[g])!=escape(h)||(m="selected "),p+="<option "+m+' value="'+escape(n[g])+'">'+n[g]+"</option>"}else{m="";s?(n[g].value==h&&(m="selected "),p+="<option "+m+'value="'+n[g].value+'">'+n[g].label+"</option>"):(escape(n[g].value)==h&&(m="selected "),p+="<option "+m+'value="'+escape(n[g].value)+'">'+n[g].label+"</option>")}var b=e(p+"</select>");l.html(b),l.wrapInner('<span class="filter_column filter_select" />'),f?b.change(function(){""!=e(this).val()?e(this).removeClass("search_init"):e(this).addClass("search_init");var n=e(this).val(),a=[];if(null==n||n==[])var r="^(.*)$";else{e.each(n,function(e,t){a.push(t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))});r="^("+a.join("|")+")$"}t.fnFilter(r,d,!0,!1)}):(b.change(function(){""!=e(this).val()?e(this).removeClass("search_init"):e(this).addClass("search_init"),s?t.fnFilter(e(this).val(),r,s):t.fnFilter(unescape(e(this).val()),r),c()}),null!=h&&""!=h&&t.fnFilter(unescape(h),r))}function p(e){switch(e){case 0:return i.substring(0,i.indexOf("{from}"));case 1:return i.substring(i.indexOf("{from}")+6,i.indexOf("{to}"));default:return i.substring(i.indexOf("{to}")+4)}}var g=this,v=e.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}",sDateFromToken:"from",sDateToToken:"to"},t);return this.each(function(){if(g.fnSettings().oFeatures.bFilter){n=new Array;var t=g.fnSettings().aoFooter[0];g.fnSettings().nTFoot;if("head:after"==v.sPlaceHolder){var m=e("tr:first",g.fnSettings().nTHead).detach();g.fnSettings().bSortCellsTop?(m.prependTo(e(g.fnSettings().nTHead)),t=g.fnSettings().aoHeader[1]):(m.appendTo(e(g.fnSettings().nTHead)),t=g.fnSettings().aoHeader[0]),"tr:last",g.fnSettings().nTHead}else if("head:before"==v.sPlaceHolder){if(g.fnSettings().bSortCellsTop)(m=e("tr:first",g.fnSettings().nTHead).detach()).appendTo(e(g.fnSettings().nTHead)),t=g.fnSettings().aoHeader[1];else t=g.fnSettings().aoHeader[0];"tr:first",g.fnSettings().nTHead}for(e(t).each(function(t){a=t;var n,s,m,b,_,S,x,k,F,y={type:"text",bRegex:!1,bSmart:!0,iMaxLenght:-1,iFilterLength:0};if(null!=v.aoColumns){if(v.aoColumns.length<a||null==v.aoColumns[a])return;y=v.aoColumns[a]}if(r=e(e(this)[0].cell).text(),null==y.sSelector?l=e(e(this)[0].cell):0==(l=e(y.sSelector)).length&&(l=e(e(this)[0].cell)),null!=y)switch(i=null!=y.sRangeFormat?y.sRangeFormat:v.sRangeFormat,y.type){case"null":break;case"number":d(g,!0,!1,!0,y.iFilterLength,y.iMaxLenght);break;case"select":1!=y.bRegex&&(y.bRegex=!1),n=g,s=y.values,m=y.bRegex,b=y.selected,_=y.multiple,F=n.fnSettings(),null!=s&&"function"!=typeof s||""==F.sAjaxSource||F.oFeatures.bServerSide||F.aoDrawCallback.push({fn:(S=a,x=l,k=r,function(e){if(2==e.iDraw&&null!=e.sAjaxSource&&""!=e.sAjaxSource&&!e.oFeatures.bServerSide)return h(n,s&&s(e.aoData,e),f(S),x,k,m,b,_)}),sName:"column_filter_"+a}),h(n,"function"==typeof s?null:s,f(a),l,r,m,b,_);break;case"number-range":!function(t){l.html(p(0));var n=t.attr("id")+"_range_from_"+a,r=e('<input type="text" class="number_range_filter form-control" id="'+n+'" rel="'+a+'"/>');l.append(r),l.append(p(1));var i=t.attr("id")+"_range_to_"+a,s=e('<input type="text" class="number_range_filter form-control" id="'+i+'" rel="'+a+'"/>');l.append(s),l.append(p(2)),l.wrapInner('<span class="filter_column filter_number_range form-control" />');var u=a;o.push(a),t.dataTableExt.afnFiltering.push(function(e,a,r){if(t.attr("id")!=e.sTableId)return!0;if(null==document.getElementById(n))return!0;var l=1*document.getElementById(n).value,s=1*document.getElementById(i).value,o="-"==a[f(u)]?0:1*a[f(u)];return""==l&&""==s||""==l&&o<=s||l<=o&&""==s||l<=o&&o<=s}),e("#"+n+",#"+i,l).keyup(function(){var e=1*document.getElementById(n).value,a=1*document.getElementById(i).value;0!=e&&0!=a&&e>a||(t.fnDraw(),c())})}(g);break;case"date-range":!function(t){var n=i.split(/[}{]/);l.html("");var r=t.attr("id")+"_range_from_"+a,s=e('<input type="text" class="date_range_filter form-control" id="'+r+'" rel="'+a+'"/>');s.datepicker();var u=t.attr("id")+"_range_to_"+a,d=e('<input type="text" class="date_range_filter form-control" id="'+u+'" rel="'+a+'"/>');for(ti=0;ti<n.length;ti++)n[ti]==v.sDateFromToken?l.append(s):n[ti]==v.sDateToToken?l.append(d):l.append(n[ti]);l.wrapInner('<span class="filter_column filter_date_range" />'),d.datepicker();var h=a;o.push(a),t.dataTableExt.afnFiltering.push(function(n,a,r){if(t.attr("id")!=n.sTableId)return!0;var l=s.datepicker("getDate"),i=d.datepicker("getDate");if(null==l&&null==i)return!0;var o=null;try{if(null==a[f(h)]||""==a[f(h)])return!1;o=e.datepicker.parseDate(e.datepicker.regional[""].dateFormat,a[f(h)])}catch(e){return!1}return null!=o&&(null==l&&o<=i||l<=o&&null==i||l<=o&&o<=i)}),e("#"+r+",#"+u,l).change(function(){t.fnDraw(),c()})}(g);break;case"checkbox":!function(t,n){null==n&&(n=u(t.fnSettings(),a,!0,!0,!0));var i,s=a,o="",f=n.length,d=r.replace("%","Perc").replace("&","AND").replace("$","DOL").replace("Â£","STERL").replace("@","AT").replace(/\s/g,"_");d=d.replace(/[^a-zA-Z 0-9]+/g,"");var h=r;null==v.sFilterButtonText&&void 0==v.sFilterButtonText||(h=v.sFilterButtonText);var p=Math.floor(f/12);f%12>0&&(p+=1);var g=100/p-2,m=10*p;1==p&&(g=20);var b='<div style="float:left; min-width: '+g+'%; " >',_=t.attr("id")+d,S="chkBtnOpen"+_,x=_+"-flt-toggle";for(o+='<button id="'+S+'" class="checkbox_filter btn btn-default" > '+h+"</button>",o+='<div id="'+x+'" title="'+r+'" rel="'+a+'" class="toggle-check ui-widget-content ui-corner-all"  style="width: '+m+'%; " >',o+=b,i=0;i<f;i++){i%12==0&&0!=i&&(o+="</div>"+b);var k=n[i],F=n[i];"object"==typeof n[i]&&(k=n[i].label,F=n[i].value);var y=e(o+='<input class="search_init checkbox_filter btn btn-default" type="checkbox" id= "'+_+"_cb_"+F+'" name= "'+d+'" value="'+F+'" >'+k+"<br/>");l.html(y),l.wrapInner('<span class="filter_column filter_checkbox" />'),y.change(function(){var n="",a="|",r=e('input:checkbox[name="'+d+'"]:checked').size();e('input:checkbox[name="'+d+'"]:checked').each(function(t){(0==t&&1==r||0!=t&&t==r-1)&&(a=""),n=(n=n.replace(/^\s+|\s+$/g,""))+e(this).val()+a,a="|"}),""!=n?e('input:checkbox[name="'+d+'"]').removeClass("search_init"):e('input:checkbox[name="'+d+'"]').addClass("search_init"),t.fnFilter(n,s,!0,!1),c()})}e("#"+S).button(),e("#"+x).dialog({autoOpen:!1,hide:"blind",buttons:[{text:"Reset",click:function(){return e('input:checkbox[name="'+d+'"]:checked').each(function(t){e(this).attr("checked",!1),e(this).addClass("search_init")}),t.fnFilter("",s,!0,!1),c(),!1}},{text:"Close",click:function(){e(this).dialog("close")}}]}),e("#"+S).click(function(){e("#"+x).dialog("open");var t=e(this);return e("#"+x).dialog("widget").position({my:"top",at:"bottom",of:t}),!1});var w=c;c=function(){var t=e("#"+S);e("#"+x).dialog("widget").position({my:"top",at:"bottom",of:t}),w()}}(g,y.values);break;case"twitter-dropdown":case"dropdown":!function(t){var n,i=a,s='<div class="dropdown select_filter form-control"><a class="dropdown-toggle" data-toggle="dropdown" href="#">'+r+'<b class="caret"></b></a><ul class="dropdown-menu" role="menu"><li data-value=""><a>Show All</a></li>',o=t.length;for(n=0;n<o;n++)s+='<li data-value="'+t[n]+'"><a>'+t[n]+"</a></li>";var c=e(s+"</ul></div>");l.html(c),l.wrapInner('<span class="filterColumn filter_select" />'),c.find("li").click(function(){g.fnFilter(e(this).data("value"),i)})}(y.values);break;case"text":default:bRegex=null!=y.bRegex&&y.bRegex,bSmart=null!=y.bSmart&&y.bSmart,d(g,bRegex,bSmart,!1,y.iFilterLength,y.iMaxLenght)}}),j=0;j<o.length;j++){s.push(function(){var t=g.attr("id");return e("#"+t+"_range_from_"+o[j]).val()+v.sRangeSeparator+e("#"+t+"_range_to_"+o[j]).val()})}if(g.fnSettings().oFeatures.bServerSide){var b=g.fnSettings().fnServerData;g.fnSettings().fnServerData=function(t,n,a){for(j=0;j<o.length;j++){var r=o[j];for(k=0;k<n.length;k++)n[k].name=="sSearch_"+r&&(n[k].value=s[j]())}if(n.push({name:"sRangeSeparator",value:v.sRangeSeparator}),null!=b)try{b(t,n,a,g.fnSettings())}catch(e){b(t,n,a)}else e.getJSON(t,n,function(e){a(e)})}}}})}}(jQuery);